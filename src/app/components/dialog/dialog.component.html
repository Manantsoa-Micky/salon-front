<h2 mat-dialog-title>Informations Détaillées</h2>
<mat-dialog-content class="mat-typography">
    <form
        id="userForm"
        [formGroup]="dialogForm"
        (ngSubmit)="onSubmit()"
        class="ajout"
    >
        <mat-form-field appearance="outline" class="full-width-input">
            <mat-label>Nom</mat-label>
            <input
                matInput
                required
                formControlName="firstName"
                value="{{ data.firstName }}"
                [readonly]="isReadOnly"
            />
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width-input">
            <mat-label>Prénom</mat-label>
            <input
                matInput
                required
                matFormFieldControl="lastName"
                value="{{ data.lastName }}"
                [readonly]="isReadOnly"
            />
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width-input">
            <mat-label>Email</mat-label>
            <input
                matInput
                placeholder="pat@example.com"
                formControlName="email"
                required
                value="{{ data.email }}"
                [readonly]="isReadOnly"
            />
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width-input">
            <mat-label>Mot de Passe</mat-label>
            <input
                matInput
                [type]="'password'"
                value="{{ data.password }}"
                [readonly]="isReadOnly"
            />
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width-input">
            <mat-label>Nom d'utilisateur</mat-label>
            <input
                matInput
                placeholder="Ex: Obelisk2000"
                formControlName="username"
                value="{{ data.username }}"
                [readonly]="isReadOnly"
            />
        </mat-form-field>
        <mat-form-field appearance="outline" class="full-width-input">
            <mat-label>Adresse</mat-label>
            <input
                matInput
                required
                placeholder="Ex: Lot II V 132 Anosy"
                formControlName="address"
                value="{{ data.address }}"
                [readonly]="isReadOnly"
            />
        </mat-form-field>

        <div class="form-right-side">
            <mat-form-field appearance="outline" class="full-width-input">
                <mat-label>Numéro</mat-label>
                <input
                    matInput
                    required
                    type="tel"
                    matInput
                    placeholder="Ex: 034-68-929-30"
                    formControlName="phone"
                    value="{{ data.phoneNumber }}"
                    [readonly]="isReadOnly"
                />
            </mat-form-field>
            <mat-form-field
                floatLabel="always"
                appearance="outline"
                class="full-width-input"
            >
                <mat-label>Salaire</mat-label>
                <input
                    matInput
                    type="number"
                    required
                    formControlName="salary"
                    value="{{ data.salary }}"
                    [readonly]="isReadOnly"
                />
                <span matTextPrefix>MGA&nbsp;</span>
            </mat-form-field>
        </div>
        <div formGroupName="hours" class="heure-container">
            <mat-form-field
                appearance="outline"
                class="full-width-input"
                required
            >
                <mat-label>Heure début</mat-label>
                <input
                    matInput
                    type="text"
                    required
                    formControlName="begin"
                    value="{{ data.hours.begin }}"
                    [readonly]="isReadOnly"
                />
            </mat-form-field>
            <p>à</p>
            <mat-form-field appearance="outline" class="full-width-input">
                <mat-label>Heure fin</mat-label>
                <input
                    matInput
                    type="text"
                    required
                    formControlName="end"
                    value="{{ data.hours.end }}"
                    [readonly]="isReadOnly"
                />
            </mat-form-field>
        </div>
        <mat-form-field appearance="outline" required>
            <mat-label>Rôle</mat-label>
            <mat-select formControlName="role" value="{{ data.role }}">
                @for (role of roles; track role) {
                <mat-option [value]="role.ref">{{ role.nom }}</mat-option>
                }
            </mat-select>
        </mat-form-field>
    </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-button *ngIf="!isReadOnly" type="submit" form="userForm">
        Sauvegarder
    </button>
    <button mat-button (click)="changeModificationState()" *ngIf="isReadOnly">
        Modifier
    </button>

    <button mat-button [mat-dialog-close]="true">Fermer</button>
</mat-dialog-actions>
